;#!/bin/sh
#|
SCRIPT_DIR="$(dirname "$0")"
exec sbcl --noinform --disable-ldb --lose-on-corruption --disable-debugger \
--no-sysinit --no-userinit --noprint \
--eval '(set-dispatch-macro-character #\# #\! (lambda (s c n)(declare (ignore c n)) (read-line s) (values)))' \
--eval "(defvar *system-to-load* \"$1\")" \
--load "$0"
|#
(require 'asdf)

(defun prepare ()
  (asdf:clear-source-registry)
  (asdf:initialize-source-registry '(:source-registry :ignore-inherited-configuration)))


(defun asdf-immediate-deps (package)


(prepare)
;(format t "~{~A~%~}" (compute-all-deps *system-to-load*))
(format t "~{~A~%~}" (ql-immediate-deps *system-to-load*))
(uiop:quit 0)
